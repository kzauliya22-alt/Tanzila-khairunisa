<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Selamat Ulang Tahun, Tanzila Khairunisa!</title>
<style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Arial',sans-serif; color:#fff; overflow-x:hidden; }

    /* Background full screen + overlay */
    .background {
        position: fixed; top:0; left:0; width:100%; height:100%;
        background:url('images/taman.jpg') no-repeat center center/cover; z-index:-3;
    }
    .overlay {
        position: fixed; top:0; left:0; width:100%; height:100%;
        background:rgba(0,0,0,0.5); z-index:-2;
    }

    /* Container utama */
    .container {
        max-width:900px;
        margin:50px auto;
        padding:30px;
        background:rgba(0,0,0,0.3);
        border-radius:15px;
        text-align:center;
        position: relative;
        z-index:2;
    }
    h1 { font-size:3em; margin-bottom:20px; animation:fadeIn 2s ease-in-out; }

    /* Slideshow center */
    .slideshow {
        position: relative;
        width: 100%;
        max-width:600px;
        height:400px;
        margin:30px auto;
        border-radius:15px;
        overflow:hidden;
        box-shadow:0 0 15px rgba(0,0,0,0.5);
        display:flex;
        justify-content:center;
        align-items:center;
    }
    .slide {
        position:absolute;
        width:100%;
        height:100%;
        object-fit:cover;
        opacity:0;
        transition:opacity 1s ease-in-out;
    }
    .slide.active { opacity:1; }

    /* Typewriter */
    #typewriter {
        font-size:1.4em; margin-top:20px;
        border-right:2px solid #fff;
        white-space:normal;
        overflow:visible;
        animation:blink-caret 1s step-end infinite;
        line-height:1.6;
    }

    /* Hati jatuh */
    .hearts { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; }
    .heart { position:absolute; color:#ff6b9d; font-size:2em; animation:fall 5s linear infinite; }

    /* Musik kontrol */
    .music-control { margin-top:20px; display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap:wrap; }
    button { padding:8px 15px; border:none; border-radius:5px; cursor:pointer; background:#ff6b9d; color:#fff; font-size:1em; }
    input[type=range] { cursor:pointer; }

    /* Kembang api canvas */
    #fireworksCanvas {
        position: fixed;
        top:0; left:0;
        width:100%; height:100%;
        pointer-events:none;
        z-index:0; /* di belakang container tapi di atas background */
    }

    /* Animasi */
    @keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
    @keyframes fall { from {transform:translateY(-100vh);} to {transform:translateY(100vh);} }
    @keyframes blink-caret { from,to{border-color:transparent;} 50%{border-color:#fff;} }

    /* Responsive */
    @media(max-width:768px){
        .slideshow{height:250px;}
        h1{font-size:2em;}
        #typewriter{font-size:1.1em;}
    }
</style>
</head>
<body>

<!-- Background & overlay -->
<div class="background"></div>
<div class="overlay"></div>

<!-- Hearts -->
<div class="hearts" id="hearts"></div>

<!-- Container -->
<div class="container">
    <h1 id="title"></h1>

    <!-- Slideshow -->
    <div class="slideshow">
        <img src="images/zila1.jpg" alt="zila1" class="slide active">
        <img src="images/zila2.jpg" alt="zila2" class="slide">
        <img src="images/zila3.jpg" alt="zila3" class="slide">
        <img src="images/zila4.jpg" alt="zila4" class="slide">
        <img src="images/zila5.jpg" alt="zila5" class="slide">
        <img src="images/zila6.jpg" alt="zila6" class="slide">
    </div>

    <!-- Typewriter -->
    <p id="typewriter"></p>

    <!-- Musik kontrol -->
    <div class="music-control">
        <audio id="music" autoplay loop>
            <source src="music/lagu.mp3" type="audio/mpeg">
            Browser Anda tidak mendukung audio.
        </audio>
        <div>
            <button onclick="playMusic()">â–¶ï¸ Play</button>
            <button onclick="pauseMusic()">â¸ï¸ Pause</button>
            <label>Volume:</label>
            <input type="range" id="volume" min="0" max="1" step="0.01" value="0.5" onchange="setVolume(this.value)">
        </div>
    </div>
</div>

<!-- Kembang api canvas -->
<canvas id="fireworksCanvas"></canvas>

<script>
/* ========== HATI JATUH ========== */
function createHeart(){
    const heart=document.createElement('div');
    heart.className='heart';
    heart.innerHTML='â¤ï¸';
    heart.style.left=Math.random()*100+'vw';
    heart.style.animationDuration=(Math.random()*3+2)+'s';
    document.getElementById('hearts').appendChild(heart);
    setTimeout(()=>heart.remove(),5000);
}
setInterval(createHeart,300);

/* ========== TYPEWRITER ========== */
const titles = ["ğŸ‰ğŸ¥³ Selamat Ulang Tahun, Tanzila Khairunisa! ğŸ‚ğŸ’–"];
const texts = [
    "Abang bingung mau bilang apa ğŸ˜…, abang cuma bisa doain ğŸ’–âœ¨\nWish u all the best for u ğŸ‰ğŸŒŸğŸ’",
    "Hari ini adalah hari spesialmu âœ¨ğŸŒ¸, di mana dunia seolah berhenti sejenak ğŸŒ¸âœ¨. Semoga tahun ini membawa kebahagiaan ğŸ˜„, impian tercapai ğŸ¯, dan lebih banyak senyum ğŸ˜. Selamat ulang tahun bocil! ğŸ‰ğŸ‚ğŸ’–"
];

let titleChar = 0;
let textIndex = 0;
let charIndex = 0;
const speed = 50;

function typeTitle() {
    const h1 = document.getElementById('title');
    if(titleChar < titles[0].length){
        h1.innerHTML += titles[0].charAt(titleChar);
        titleChar++;
        setTimeout(typeTitle, speed);
    } else {
        setTimeout(typeWriter, 500);
    }
}

function typeWriter() {
    const p = document.getElementById('typewriter');
    if(charIndex < texts[textIndex].length){
        if(texts[textIndex].charAt(charIndex)==="\n"){
            p.innerHTML += "<br>";
        } else {
            p.innerHTML += texts[textIndex].charAt(charIndex);
        }
        charIndex++;
        setTimeout(typeWriter, speed);
    } else {
        setTimeout(()=>{
            p.innerHTML = "";
            textIndex = (textIndex+1)%texts.length;
            charIndex = 0;
            setTimeout(typeWriter,500);
        },2000);
    }
}

/* ========== SLIDESHOW ========== */
let currentSlide=0;
const slides=document.querySelectorAll('.slide');
const totalSlides=slides.length;
function showSlide(index){
    slides.forEach(s=>s.classList.remove('active'));
    slides[index].classList.add('active');
}
function nextSlide(){
    currentSlide=(currentSlide+1)%totalSlides;
    showSlide(currentSlide);
}
setInterval(nextSlide,3000);

/* ========== MUSIK ========== */
const music=document.getElementById('music');
music.volume=0.5;
function playMusic(){music.play();}
function pauseMusic(){music.pause();}
function setVolume(val){music.volume=val;}

/* ========== MULAI TYPEWRITER ========== */
window.onload=function(){setTimeout(typeTitle,1500);}

/* ========== KEMBANG API ========== */
const canvas = document.getElementById('fireworksCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

class Particle {
    constructor(x, y, color, dx, dy){
        this.x=x; this.y=y; this.color=color; this.dx=dx; this.dy=dy;
        this.alpha=1; this.size=Math.random()*3+2;
    }
    update(){
        this.x+=this.dx;
        this.y+=this.dy;
        this.alpha-=0.01;
    }
    draw(){
        ctx.globalAlpha=this.alpha;
        ctx.fillStyle=this.color;
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
        ctx.fill();
        ctx.globalAlpha=1;
    }
}

let particles=[];

function createFirework(){
    const x = Math.random()*canvas.width;
    const y = Math.random()*canvas.height/2;
    const colors = ['#ff4c4c','#ffec4c','#4cff4c','#4cffff','#4c4cff','#ff4cff'];
    const count = 30 + Math.random()*30;
    for(let i=0;i<count;i++){
        const angle = Math.random()*Math.PI*2;
        const speed = Math.random()*5 + 2;
        const dx = Math.cos(angle)*speed;
        const dy = Math.sin(angle)*speed;
        const color = colors[Math.floor(Math.random()*colors.length)];
        particles.push(new Particle(x,y,color,dx,dy));
    }
}

function animateFireworks(){
    requestAnimationFrame(animateFireworks);
    ctx.fillStyle='rgba(0,0,0,0.2)';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    particles.forEach((p,i)=>{
        p.update();
        p.draw();
        if(p.alpha<=0) particles.splice(i,1);
    });
}

setInterval(createFirework,1500);
animateFireworks();

window.addEventListener('resize',()=>{
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
});
</script>

</body>
</html>
